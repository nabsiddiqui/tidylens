% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/video.R
\name{video_extract_shots}
\alias{video_extract_shots}
\title{Extract shots from video with timing}
\usage{
video_extract_shots(
  video_path,
  fps = 2,
  threshold = 0.5,
  output_dir = tempdir(),
  position = "middle",
  include_style = TRUE
)
}
\arguments{
\item{video_path}{Path to video file.}

\item{fps}{Frames per second to analyze. Higher = more accurate but slower. Default 2.}

\item{threshold}{Shot detection threshold. Higher = fewer cuts. Default 0.5.}

\item{output_dir}{Directory for temporary frames. Default \code{tempdir()}.}

\item{position}{Which frame to keep for each shot: \code{"first"}, \code{"middle"}, \code{"last"}.
Default \code{"middle"}.}

\item{include_style}{Whether to classify shot scale (ECU, CU, etc.). Default \code{TRUE}.}
}
\value{
A tibble with one row per shot containing:
\itemize{
\item \code{shot_id}: Sequential shot number.
\item \code{start_time}: Start time in seconds.
\item \code{end_time}: End time in seconds.
\item \code{duration}: Shot duration in seconds.
\item \code{start_frame}: Frame index of start.
\item \code{end_frame}: Frame index of end.
\item \code{n_frames}: Number of frames in shot.
\item \code{shot_scale}: Shot scale (if include_style = TRUE).
\item \code{shot_scale_name}: Full shot scale name.
\item \code{frame_path}: Path to representative frame image.
}
}
\description{
Analyze a video file directly to detect shots and return timing information.
This is a convenience function that combines frame extraction, shot detection,
and timing calculation in one step.
}
\details{
\subsection{How it works (ELI5)}{

This function watches the video and notices when the scene changes (like when
a movie cuts from one camera angle to another). It tells you when each shot
starts and ends in seconds, plus how long it lasts.

The shot detection algorithm:
\enumerate{
\item Extracts frames at the specified fps.
\item Computes color histograms for each frame.
\item Measures chi-squared distance between consecutive frames.
\item Marks boundaries where distance exceeds threshold.
}
}
}
\references{
Chi-squared histogram comparison is a standard technique in video analysis.
See: Lienhart, R. (2001). Reliable Transition Detection in Videos.
\url{https://doi.org/10.1145/500141.500149}
}
\seealso{
Other video: 
\code{\link{detect_shot_changes}()},
\code{\link{video_download}()},
\code{\link{video_extract_frames}()},
\code{\link{video_get_info}()},
\code{\link{video_sample_frames}()}
}
\concept{video}
